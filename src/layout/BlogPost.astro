---
import '../style/content.css'
import type { CollectionEntry } from 'astro:content'
import Header from '../view/svelte/Header.svelte'
import Page from './Page.astro'
import MainLayout from '../layout/Main.astro'
import PostMeta from '@component/svelte/Post/PostMeta.svelte'
import type { PostMeta as TPostMeta } from '@model/post-meta'
import { SITE_DESCRIPTION, SITE_TITLE } from '@constant/app'

type Props = Omit<CollectionEntry<'blog'>, 'id'> & {
  id: string
}

const { id, data } = Astro.props

const postMeta: TPostMeta = {
  ...data,
  id,
  tags: data.tags || [],
  date: (data.date || data.pubDate)!,
}

const title = `${data.title} Â· ${SITE_TITLE} `
---

<Page title={title} description={data.description || SITE_DESCRIPTION}>
  <Header />
  <MainLayout>
    <article class="pt-32">
      <PostMeta meta={postMeta} />
      <div class="flex justify-center">
        <div class="content prose-lg max-w-3xl py-6 font-bodytext">
          <slot />
        </div>
      </div>
    </article>
  </MainLayout>
</Page>
