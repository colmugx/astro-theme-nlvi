---
import type { PostMeta } from '@model/post-meta'
import { convertDash } from 'src/util/convertDash'
import FormattedDate from './FormattedDate.astro'

type Props = {
  meta: PostMeta
}

const { meta } = Astro.props
---

<div class="flex flex-col">
  <div class="mx-1 flex items-center text-sm text-gray-400">
    <FormattedDate date={meta.updatedDate || meta.date} />
    {
      meta.category && (
        <a
          href={`/archive/categories/${meta.category}`}
          class="dot relative uppercase text-main hover:underline"
          aria-label={`Link to ${meta.category} category page`}
        >
          {meta.category}
        </a>
      )
    }
    {
      meta.readingTime && (
        <div class="dot relative">{Math.ceil(meta.readingTime.minutes)} mins read</div>
      )
    }
  </div>
  <div class="flex justify-between">
    <div class="flex flex-1 flex-col">
      <div class="mb-8 pt-1">
        <h1 class="text-7xl font-bold uppercase" aria-label="Post title">
          {meta.title}
        </h1>
        {
          meta.subTitle && (
            <div class="flex justify-end pt-4">
              <h1 class="text-3xl text-gray-400" aria-label="Post subtitle">
                —— {meta.subTitle}
              </h1>
            </div>
          )
        }
      </div>
    </div>
    <div>
      {
        meta.tags?.map(tag => (
          <a href={`/tags/${convertDash(tag)}`} class="rounded-sm text-main hover:animate-flashBtn">
            {tag}
          </a>
        ))
      }
    </div>
  </div>
</div>

<style>
  .dot {
    @apply ml-2 pl-1 before:absolute before:-left-1 before:top-1/2 before:h-0.5 before:w-0.5 before:-translate-y-1/2 before:rounded-full before:bg-gray-500;
  }
</style>
